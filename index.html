<!DOCTYPE html>
<html>
<head>
	<title>GCP Login Test</title>
</head>
<body>

	<button id="goo">Login With Google</button>
	
	<!--<script src="https://apis.google.com/js/client.js"></script>-->
	<script type="text/javascript">
		//  https://www.googleapis.com/auth/userinfo.profile
		//var auth_link = "https://accounts.google.com/o/oauth2/v2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.metadata.readonly&include_granted_scopes=true&state=state_parameter_passthrough_value&redirect_uri=https%3A%2F%2Fmichaelfm1211.github.io%2Fauthed&response_type=token&client_id=314350026427-mj8e6g87mg3fifnv2gn4h98r19mrek2f.apps.googleusercontent.com";

		var auth_link = "https://accounts.google.com/o/oauth2/v2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&include_granted_scopes=true&state=state_parameter_passthrough_value&redirect_uri=https%3A%2F%2Fmichaelfm1211.github.io%2Flogin-test%2Fauthed&response_type=token&client_id=314350026427-mj8e6g87mg3fifnv2gn4h98r19mrek2f.apps.googleusercontent.com";

		window.location = auth_link;
		/*var GoogleAuth; // Google Auth object.
		function initClient() {
			// https://www.googleapis.com/auth/plus.login
		  gapi.client.init({
		      'apiKey': 'AIzaSyDPBQdtTGEECfliYQwUIpNcueHCj4sAGZ0',
		      'clientId': '314350026427-mj8e6g87mg3fifnv2gn4h98r19mrek2f.apps.googleusercontent.com',
		      'scope': 'https://www.googleapis.com/auth/plus.login',
		      'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest']
		  }).then(function () {
		      GoogleAuth = gapi.auth2.getAuthInstance();

		      // Listen for sign-in state changes.
		      GoogleAuth.isSignedIn.listen(updateSigninStatus);
		  });
		}
		var goo = document.getElementById("goo")

		var GoogleAuth; // Google Auth object.

		function initClient() {
		  gapi.client.init({
		      'apiKey': 'AIzaSyDPBQdtTGEECfliYQwUIpNcueHCj4sAGZ0',
		      'clientId': '314350026427-mj8e6g87mg3fifnv2gn4h98r19mrek2f.apps.googleusercontent.com',
		      'scope': 'https://www.googleapis.com/auth/drive.metadata.readonly',
		      'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest']
		  }).then(function () {
		      GoogleAuth = gapi.auth2.getAuthInstance();

		      // Listen for sign-in state changes.
		      GoogleAuth.isSignedIn.listen(updateSigninStatus);
		  });
		}

		goo.onclick = function(){
			GoogleAuth.signIn();
		}


		var isAuthorized;
		var currentApiRequest;

		/**
		 * Store the request details. Then check to determine whether the user
		 * has authorized the application.
		 *   - If the user has granted access, make the API request.
		 *   - If the user has not granted access, initiate the sign-in flow.
		 
		function sendAuthorizedApiRequest(requestDetails) {
		  currentApiRequest = requestDetails;
		  if (isAuthorized) {
		    // Make API request
		    // gapi.client.request(requestDetails)

		    // Reset currentApiRequest variable.
		    currentApiRequest = {};
		  } else {
		    GoogleAuth.signIn();
		  }
		}

		/**
		 * Listener called when user completes auth flow. If the currentApiRequest
		 * variable is set, then the user was prompted to authorize the application
		 * before the request executed. In that case, proceed with that API request.
		 
		function updateSigninStatus(isSignedIn) {
		  if (isSignedIn) {
		    isAuthorized = true;
		    if (currentApiRequest) {
		      sendAuthorizedApiRequest(currentApiRequest);
		    }
		  } else {
		    isAuthorized = false;
		  }
		}

		*/

	</script>

</body>
</html>
